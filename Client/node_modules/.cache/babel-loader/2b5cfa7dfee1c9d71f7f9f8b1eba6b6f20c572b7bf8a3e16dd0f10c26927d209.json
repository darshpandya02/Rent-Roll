{"ast":null,"code":"import axios from \"axios\";\nimport { message } from \"antd\";\nexport const userLogin = reqObj => async dispatch => {\n  dispatch({\n    type: \"LOADING\",\n    payload: true\n  });\n  try {\n    console.log(reqObj);\n    const response = await axios.post(\"http://localhost:4000/api/users/login\", reqObj);\n    const {\n      admin,\n      username,\n      _id\n    } = response.data;\n    localStorage.setItem(\"user\", JSON.stringify({\n      admin,\n      username,\n      _id\n    }));\n    const lastClickedURL = localStorage.getItem(\"lastClickedURL\");\n    const bookingURL = lastClickedURL ? lastClickedURL : \"/\";\n    message.success(\"Login success\");\n    dispatch({\n      type: \"LOADING\",\n      payload: false\n    });\n    setTimeout(() => {\n      window.location.href = bookingURL;\n    }, 500);\n  } catch (error) {\n    console.error(\"Error:\", error);\n    console.error(\"Error response:\", error.response);\n    message.error(\"Something went wrong\");\n    dispatch({\n      type: \"LOADING\",\n      payload: false\n    });\n  }\n};\nexport const userRegister = reqObj => async dispatch => {\n  dispatch({\n    type: \"LOADING\",\n    payload: true\n  });\n  try {\n    const response = await axios.post(\"http://localhost:4000/api/users/register\", reqObj);\n    message.success(\"Registration successfull\");\n    setTimeout(() => {\n      window.location.href = \"/login\";\n    }, 500);\n    dispatch({\n      type: \"LOADING\",\n      payload: false\n    });\n  } catch (error) {\n    console.error(\"Error:\", error);\n    console.error(\"Error response:\", error.response); // Log the error response\n\n    message.error(\"Something went wrong\");\n    dispatch({\n      type: \"LOADING\",\n      payload: false\n    });\n  }\n};","map":{"version":3,"names":["axios","message","userLogin","reqObj","dispatch","type","payload","console","log","response","post","admin","username","_id","data","localStorage","setItem","JSON","stringify","lastClickedURL","getItem","bookingURL","success","setTimeout","window","location","href","error","userRegister"],"sources":["/Users/darshpandya/Desktop/Projects/Rent-Roll/Client/src/redux/actions/userActions.js"],"sourcesContent":["import axios from \"axios\";\nimport { message } from \"antd\";\n\nexport const userLogin = (reqObj) => async (dispatch) => {\n  dispatch({ type: \"LOADING\", payload: true });\n\n  try {\n    \n    console.log(reqObj);\n\n    const response = await axios.post(\n      \"http://localhost:4000/api/users/login\",\n      reqObj\n    );\n    \n    const { admin, username, _id } = response.data;\n    localStorage.setItem(\"user\", JSON.stringify({ admin, username, _id }));\n    const lastClickedURL = localStorage.getItem(\"lastClickedURL\");\n    const bookingURL = lastClickedURL\n        ? lastClickedURL\n        : \"/\";\n    message.success(\"Login success\");\n    dispatch({ type: \"LOADING\", payload: false });\n    setTimeout(() => {\n      window.location.href = bookingURL;\n    }, 500);\n  } catch (error) {\n    console.error(\"Error:\", error);\n    console.error(\"Error response:\", error.response);\n  \n    message.error(\"Something went wrong\");\n    dispatch({ type: \"LOADING\", payload: false });\n  }\n};\n\n\nexport const userRegister = (reqObj) => async (dispatch) => {\n  dispatch({ type: \"LOADING\", payload: true });\n\n  try {\n    const response = await axios.post(\n      \"http://localhost:4000/api/users/register\",\n      reqObj\n    );\n    message.success(\"Registration successfull\");\n    setTimeout(() => {\n      window.location.href = \"/login\";\n    }, 500);\n\n    dispatch({ type: \"LOADING\", payload: false });\n  } catch (error) {\n    console.error(\"Error:\", error);\n    console.error(\"Error response:\", error.response); // Log the error response\n  \n    message.error(\"Something went wrong\");\n    dispatch({ type: \"LOADING\", payload: false });\n  }\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,MAAM;AAE9B,OAAO,MAAMC,SAAS,GAAIC,MAAM,IAAK,MAAOC,QAAQ,IAAK;EACvDA,QAAQ,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,OAAO,EAAE;EAAK,CAAC,CAAC;EAE5C,IAAI;IAEFC,OAAO,CAACC,GAAG,CAACL,MAAM,CAAC;IAEnB,MAAMM,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAC/B,uCAAuC,EACvCP,MACF,CAAC;IAED,MAAM;MAAEQ,KAAK;MAAEC,QAAQ;MAAEC;IAAI,CAAC,GAAGJ,QAAQ,CAACK,IAAI;IAC9CC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEP,KAAK;MAAEC,QAAQ;MAAEC;IAAI,CAAC,CAAC,CAAC;IACtE,MAAMM,cAAc,GAAGJ,YAAY,CAACK,OAAO,CAAC,gBAAgB,CAAC;IAC7D,MAAMC,UAAU,GAAGF,cAAc,GAC3BA,cAAc,GACd,GAAG;IACTlB,OAAO,CAACqB,OAAO,CAAC,eAAe,CAAC;IAChClB,QAAQ,CAAC;MAAEC,IAAI,EAAE,SAAS;MAAEC,OAAO,EAAE;IAAM,CAAC,CAAC;IAC7CiB,UAAU,CAAC,MAAM;MACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAGL,UAAU;IACnC,CAAC,EAAE,GAAG,CAAC;EACT,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdpB,OAAO,CAACoB,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAC9BpB,OAAO,CAACoB,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAClB,QAAQ,CAAC;IAEhDR,OAAO,CAAC0B,KAAK,CAAC,sBAAsB,CAAC;IACrCvB,QAAQ,CAAC;MAAEC,IAAI,EAAE,SAAS;MAAEC,OAAO,EAAE;IAAM,CAAC,CAAC;EAC/C;AACF,CAAC;AAGD,OAAO,MAAMsB,YAAY,GAAIzB,MAAM,IAAK,MAAOC,QAAQ,IAAK;EAC1DA,QAAQ,CAAC;IAAEC,IAAI,EAAE,SAAS;IAAEC,OAAO,EAAE;EAAK,CAAC,CAAC;EAE5C,IAAI;IACF,MAAMG,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAC/B,0CAA0C,EAC1CP,MACF,CAAC;IACDF,OAAO,CAACqB,OAAO,CAAC,0BAA0B,CAAC;IAC3CC,UAAU,CAAC,MAAM;MACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACjC,CAAC,EAAE,GAAG,CAAC;IAEPtB,QAAQ,CAAC;MAAEC,IAAI,EAAE,SAAS;MAAEC,OAAO,EAAE;IAAM,CAAC,CAAC;EAC/C,CAAC,CAAC,OAAOqB,KAAK,EAAE;IACdpB,OAAO,CAACoB,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAC9BpB,OAAO,CAACoB,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAClB,QAAQ,CAAC,CAAC,CAAC;;IAElDR,OAAO,CAAC0B,KAAK,CAAC,sBAAsB,CAAC;IACrCvB,QAAQ,CAAC;MAAEC,IAAI,EAAE,SAAS;MAAEC,OAAO,EAAE;IAAM,CAAC,CAAC;EAC/C;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}